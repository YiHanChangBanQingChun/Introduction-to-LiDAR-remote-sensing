# 激光雷达数据获取

1. 激光雷达系统的工作原理
   1. 全波形机关雷达数据
2. 点云数据处理流程（关键流程以及每一个流程的意义时关键题目，全波形数据图像处理也是题目）
   1. 原始点云
   2. 几何配准（多源点云坐标统一）
      1. 将各自独立坐标系的站点数据统一到同一个相对坐标系或者真实的地理坐标系下，从而得到目标对象的完整的点云数据
      2. 粗配准一般用人工选择特征点实现
      3. 精配准是自动选取特征元素进行匹配
      4. 粗配准是在相领的点重叠区域选若干个同名点，然后解算矩阵参数
      5. 精配准是迭代最近点算法、正态分布变换算法。
   3. 点云去噪（去除噪声点，保留细节特征）
      1. 距离去噪
      2. 统计去噪
      3. 顶帽变换去噪
      4. 目前三种常用的去噪方法：
         1. 基于统计的噪声剔除方法：
            1. 基于统计的方法考虑了噪声点的高程、密度等属性与非噪声点间存在的显著差异，通过设置适应性阈值来区分噪声点和非噪声点
         2. 基于频率域的噪声剔除方法：
            1. 基于频率域的噪声剔除方法将点云变换到频率域空间，利用信号的差异来剔除噪声
            <!-- 2. 时域关注波形相位等
            3. 频域关注
            4. 拉伸小波、压缩小波 -->
         3. 基于表面的噪声剔除方法
            1. 基于频率域的噪声剔除方法将点云变换到频率域空间，利用信号的差异来剔除噪声
      5. 对于不同对象有不同的方法
         1. 针对典型噪声，采用基于高程统计直方图的去噪方法。统计点云的高程分布，设定采样间隔绘制高程分布直方图，并设置高程和频数阈值，剔除异常高点和低点。
         2. 针对非典型噪声，采用基于粗糙度估计的去噪方法。首先构建点云顶点P的局部 Delaunay 三角网并确定顶点及其邻域各点。
   4. 点云滤波（分离地面点和非地面点）
      1. 含义
         1. 点云滤波是从原始点云数据分离地面点与非地面点的过程，通常基于一定的条件规则或者先验知识，例如，在一定区域内非地面点总是高于地面点、地形坡度变化总是在一个范围之内、地物具有特定的几何结构，如建筑物、植被等。有数学形态学点云滤波、多级移动曲面拟合点云滤波和渐进加密三角网点云滤波。
      2. 作用是去噪声点，离群点，点云平滑，数据压缩等
      3. 密度不规则要进行平滑处理
      4. 由于遮挡等问题造成离群点
      5. 数据下采样
         1. 体素下采样，选择网格中心点云或者离中心最近的点云。
         2. 效率高
         3. 分布均匀
         4. 可以控制间距
         5. 不能控制点个数
      6. 常见算法
         1. 移动窗口滤波
            1. 格网索引
            2. 考虑地形曲面的连续性，分类结果更加准确
         2. 数字形态学滤波
            1. 开运算、闭运算
            2. 腐蚀、膨胀
            3. 腐蚀收缩边界
         3. 布料模拟滤波csf
            1. 类似于dsm
            <!-- 2. 考试题目：dsm、dem（数字地表模型）、dtm、ndsm（归一化数字表面模型）是什么？ -->
   5. 点云分类（点云语义分割）
      1. 也就是点云语义分割，点云分类指对场景中所有激光点云逐一赋予语义标签。点云分类是点云数据后续应用的基础性工作，已有的点云分类算法可分为基于语义规则和基于机器学习两类。
      2. 基于语义规则的点云分类
         1. 根据各类地物的空间分布特点设定一系列规则，如高程阈值、线性约束、空间位置关系约束等，实现场景地物的逐一要素提取，主要包括基于模型拟合的和基于聚类的点云分类算法。
         2. 基于模拟拟合的点云分类算法
            1. 霍夫变换
            2. 随机采样一致ransac
         3. 基于聚类的点云分类算法
            1. k-means（无监督）
            2. dbscan
            3. mean-shift
            4. 谐聚类
      3. 基于机器学习与深度学习的点云分类
         1. 根据特征提取方式的不同，基于机器学习的点云分类算法可分为基于经典机器学习和基于深度学习。
         2. 机器学习还是要标签
         3. 深度学习有一些神经网络去自动匹配分类方法

## 激光雷达数据处理

1. 波形质量评价（important）
   1. 波形质量评价指标
   2. 信噪比
   3. 波形去噪
      1. 小波可以刻画出压缩和拉伸的特性
      2. emd-soft
   4. 波形分解
      1. 初始参数估计
         1. 原始回波信号分成多个高斯波的过程
         2. 一阶导数二阶导数为0，可以求波峰
      2. 估计参数优化
      3. 非线性拟合算法迭代最优解
2. 全波形数据处理
   1. 原始波形
   2. 质量控制（剔除质量较差的数据）
   3. 波形去噪（去除背景噪声）
      1. 波形数据采集过程通常会受外部环境(太阳、大气等)和内部系统等多种因素影响，导致收集的信号中存在噪声。去噪是全波形数据处理的一个重要步骤，其目的是为后续的波形分解和特征参数提取提供高质量波形。目前，常用的波形去噪算法主要有四种：均值滤波、高斯滤波、经验模态分解软阈值滤波和小波滤波。
   4. 波形分解（分解得到目标回波）
      1. 波形分解是将原始回波信号分解为多个高斯波的过程。波形分解输入为去噪后的波形，输出为分解得到的高斯函数，中间主要经过初始参数估计和波形非线性拟合两个步骤。
      2. 初始参数估计
         1. 拐点法和小波变换法
      3. 波形非线性拟合
         1. 通过小波变换得到初始估算参数后，为进一步提高混合高斯模型拟合精度，需进一步对其进行优化。目前，常用于波形分解的非线性拟合算法有 Levenberg-Marquardt(LM)方法、Expectation Maximization(EM)方法、最小二乘法等。
   5. 波形特征参数提取（提取特征参数）
      1. 波形特征参数是从波形垂直分布中计算得到的反映信号垂直分布特征的度量参数，其提取过程为：基于波形分解结果，确定光斑内各地物所对应的波形组分并提取相关的波形特征参数，可进一步用于估算地表特征。目前，常用的波形特征参数包括波形分位数高度、波形高度指数和波形能量指数。
3. 光子数据
   1. 532nm（绿光）：主要用于高分辨率成像和测量，适用于浅层水体、植被和其他高反射率目标。
   2. 1064nm（红外光）：主要用于穿透性较强的应用，如穿透大气中的尘埃和烟雾，适用于深层水体、地形测绘和其他低反射率目标。
   3. 发射信号能量较低，能量较短的脉冲，能够提供更高的分辨率和更高的测量精度。只测量有和无，而不记录强度.
   4. 概念：
      1. 光子计数 LiDAR系统的发射和接收信号均为弱信号，受噪声(太阳背景噪声、系统噪声、大气散射噪声)影响极大。
      2. 光子去噪和光子分类是光子计数 LiDAR数据处理的两个关键步骤，在冰川、海冰和湖泊等区域，通过光子去噪算法获取的信号点即为地面信号光子；但在植被覆盖的森林区域，需对去噪后的光子点进一步分类，以区分地面和地物信号。
   5. 处理
      1. 误差纠正——大气（天空大气环境是很重要的考试题）
      2. 大气延迟校正模型
         1. 大气折射因子与湿度、温度、气压有关
      3. 误差纠正——潮汐
         1. 潮汐直接和间接引起地壳形变，也就是固体潮、海洋超等，会引起地壳形变，采用iers2010潮汐模型进行纠正
      4. 粗去噪
         1. 高程频率直方图
         2. 缓冲区
      5. 精去噪
         1. 光子密度频率直方图
         2. dbscan
      6. 地面光子点提取
         1. 初始地面光子点
         2. 精确地面光子点
         3. 地面光子加密点
         4. 最终地面光子点
      7. 光子点分类
         1. 去除冠层噪声
   6. 光子数据处理流程（作业）
      1. 原始光子数据
         1. 噪声光子
         2. 信号光子
      2. 误差纠正
         1. 仪器误差纠正
         2. 大气误差纠正
         3. 潮汐改正
      3. 光子去噪
         1. 定义：
            1. 后利用OPTICS(Ordering Points to Identify the ClusteringStructure)算法计算每个点的光子密度，利用信号光子点分布密集而噪声光子点分布稀疏的特点实现精去噪；最后基于光子点高程分布特征去除残留噪声光子。
            2. 方法示例：
               1. 基于高程统计直方图的粗去噪
                  1. 光子噪声分布在整个垂直剖面范围内(图4.25a),为了初步确定光子信号的高程范围并减少数据量，可以采用基于高程统计直方图的粗去噪方法。
               2. 基于改进OPTICS 算法的密度聚类精去噪
                  1. 基于高程统计直方图的粗去噪方法可去除大部分光子噪声，但是仍残留了较多光子噪声点，需要对其进行精去噪，本节介绍一种基于改进 OPTICS算法的密度聚类精去噪方法(Zhu et al.,2018)。
               3. 基于光子点高程分布特征的去噪
                  1. 经过上述步骤可以去除大部分噪声，但在地面以下、空中、近冠层表面和近地面仍残留部分噪声，可以结合高程分布特征进行去除，即一定大小窗口内的光子点云高程符合正态分布，利用区间估计的方法，通过设置置信区间剔除近冠层顶部和近地面的光子噪声。
         2. 局部统计
         3. 密度聚类统计
      4. 分类
         1. 定义：
            1. 通过光子去噪可以提取信号光子点，但是在森林区域为了提取冠层高度等参数，还需将信号光子点分为地面光子点和冠层光子点。
            2. 逐步将去噪后的光子点分为地面光子点、冠层表面光子点、冠层光子点和残留噪声光子点。
         2. 方法示例：
            1. 地面光子点提取：
               1. 为了提高在复杂地形和植被密集覆盖条件下地面光子点提取的精度，通过初始地面光子点提取、伪地面光子点去除、地面光子点加密和地面光子点拟合四个步骤来提取地面光子点。
               2. 初始地面光子点提取。为了减弱近地面光子噪声对地面光子点提取的影响，基于移动窗口内的光子点建立高程频率直方图，并确定高程最低的波峰所在位置；比较高程最低波峰所在位置与最低点高程，若两者的高程差小于一定阈值(可根据地形设置自适应阈值),则将该波峰定为地面波峰，在地面波峰一定高程范围内选择密度最大的点作为初始地面光子点。
               3. 地面光子点去除。在初始地面光子提取过程中，可能会将近地面光子、植被冠层光子和噪声光子误分为初始地面光子，可以进一步利用 EMD方法去除伪地面点(Kopsinis and McLaughlin,2009)
               4. 面光子加密。采用基于三角形加密方法增加地面光子点数量，以提高在复杂地形与植被密集覆盖下的光子点云分类精度。
               5. 面光子点拟合。为获取完整的地面光子点并生成地面，利用三次样条曲线对地面光子进行拟合。
            2. 冠层表面光子点提取
               1. 冠层表面光子噪声去除。去噪后光子点云仍可能包含近冠层表面光子噪声，影响冠层表面光子的精确提取。通常首先对去噪后光子点进行窗口划分，基于窗口内所有光子统计光子高程分位数。
               2. 冠层表面光子提取。鉴于近冠层表面去噪后的光子点云中仍可能包含孤立的噪声光子点，对去噪后的数据重新统计高程分位数，提取光子高程分位数区间[0.96,0.99]的光子点云作为冠层表面光子。
               3. 冠层表面光子拟合。对冠层表面光子进行三次样条曲线拟合，得到冠层顶部表面。
         3. 噪声点光子
         4. 冰川光子
         5. 地面点光子
         6. 植被点光子
4. 作业
   1. 点云数据处理流程及其各步骤内容与意义
      1. 点云数据处理流程包括多个关键步骤，每个步骤都有其特定的意义。
      2. 首先是原始点云的获取，这是整个点云数据处理的基础。接下来是几何配准，这一步骤的目的是将各自独立坐标系的站点数据统一到同一个相对坐标系或者真实的地理坐标系下，从而得到目标对象的完整点云数据。几何配准分为粗配准和精配准，粗配准一般通过人工选择特征点实现，而精配准则是自动选取特征元素进行匹配，常用的方法包括迭代最近点算法和正态分布变换算法。
      3. 点云去噪是下一步，目的是去除噪声点，保留细节特征。常用的去噪方法包括距离去噪、统计去噪和顶帽变换去噪。基于统计的方法考虑了噪声点的高程、密度等属性与非噪声点间存在的显著差异，通过设置适应性阈值来区分噪声点和非噪声点。基于频率域的方法则将点云变换到频率域空间，利用信号的差异来剔除噪声。针对不同对象，采用不同的去噪方法，例如，针对典型噪声，采用基于高程统计直方图的去噪方法，而针对非典型噪声，则采用基于粗糙度估计的去噪方法。
      4. 点云滤波的目的是分离地面点和非地面点，通常基于一定的条件规则或者先验知识，例如，在一定区域内非地面点总是高于地面点、地形坡度变化总是在一个范围之内、地物具有特定的几何结构等。常见的滤波算法包括移动窗口滤波、数字形态学滤波和布料模拟滤波等。滤波的作用不仅是去除噪声点和离群点，还包括点云平滑和数据压缩。
      5. 点云分类，也称为点云语义分割，是对场景中所有激光点云逐一赋予语义标签的过程。点云分类是点云数据后续应用的基础性工作，已有的点云分类算法可分为基于语义规则和基于机器学习两类。基于语义规则的点云分类根据各类地物的空间分布特点设定一系列规则，如高程阈值、线性约束、空间位置关系约束等，实现场景地物的逐一要素提取。基于机器学习的点云分类算法则根据特征提取方式的不同，分为基于经典机器学习和基于深度学习，后者通过神经网络自动匹配分类方法。
   2. 全波形数据处理流程及其各步骤内容与意义
      1. 全波形数据处理流程包括多个关键步骤，每个步骤都有其特定的意义。首先是原始波形的获取，这是整个全波形数据处理的基础。
      2. 接下来是质量控制，这一步骤的目的是剔除质量较差的数据，以确保后续处理的准确性和可靠性。
      3. 波形去噪是下一步，目的是去除背景噪声，为后续的波形分解和特征参数提取提供高质量波形。波形数据采集过程通常会受外部环境（如太阳、大气等）和内部系统等多种因素影响，导致收集的信号中存在噪声。目前，常用的波形去噪算法主要有四种：均值滤波、高斯滤波、经验模态分解软阈值滤波和小波滤波。
      4. 波形分解是将原始回波信号分解为多个高斯波的过程。波形分解输入为去噪后的波形，输出为分解得到的高斯函数，中间主要经过初始参数估计和波形非线性拟合两个步骤。初始参数估计常用的方法包括拐点法和小波变换法。通过小波变换得到初始估算参数后，为进一步提高混合高斯模型拟合精度，需进一步对其进行优化。目前，常用于波形分解的非线性拟合算法有 Levenberg-Marquardt(LM)方法、Expectation Maximization(EM)方法和最小二乘法等。
      5. 波形特征参数提取是从波形垂直分布中计算得到的反映信号垂直分布特征的度量参数，其提取过程为：基于波形分解结果，确定光斑内各地物所对应的波形组分并提取相关的波形特征参数，可进一步用于估算地表特征。目前，常用的波形特征参数包括波形分位数高度、波形高度指数和波形能量指数。通过这些步骤，全波形数据处理能够提供高精度的地表特征信息，为各种应用提供可靠的数据支持。
   3. 光子数据处理流程及其各步骤内容与意义
      1. 光子数据处理流程是一个复杂且精细的过程，旨在从光子计数LiDAR系统获取的原始数据中提取有用的地理信息。
      2. 首先，光子计数LiDAR系统发射和接收的信号均为弱信号，容易受到太阳背景噪声、系统噪声和大气散射噪声的影响。因此，光子去噪和光子分类成为数据处理的两个关键步骤。在冰川、海冰和湖泊等区域，通过光子去噪算法可以直接获取地面信号光子；而在植被覆盖的森林区域，则需要进一步分类以区分地面和地物信号。
      3. 首先，在误差纠正阶段，需对系统误差、大气延迟和潮汐效应进行补偿。大气延迟校正模型依据大气折射因素，考虑湿度、温度、气压对光子路径的影响；潮汐改正则基于IERS2010模型，以修正固体潮、海洋潮引起的地壳形变。这些误差纠正步骤能确保LiDAR数据在不同环境中的适用性。
      4. 随后进行光子去噪，以去除背景噪声并保留真实的信号光子。光子去噪一般分为粗去噪和精去噪，粗去噪通常采用高程统计直方图，剔除明显的背景噪声。
      5. 接下来，精去噪使用密度聚类算法，例如改进的OPTICS算法，以光子点云密度为依据进一步剔除干扰光子点。该步骤还会结合光子高程分布特征，通过局部统计和置信区间设置，在去除近地面和近冠层表面噪声光子的同时，保留有效的信号光子。
      6. 经过去噪的信号光子点需进一步分类，以提取不同地形或地物的信息。在森林覆盖区域，通常将光子分为地面光子、冠层表面光子和冠层光子等类型。地面光子的提取包含初始提取、伪地面点去除、加密和拟合步骤，通过移动窗口和高程直方图的统计找到地面波峰，并利用三次样条曲线拟合生成完整地面模型。在冠层光子的分类中，通过设定高程分位数区间，将去噪后的光子点云进一步划分，确保精确捕捉到冠层的高度信息。
      7. 最终，光子数据处理流程包括原始光子数据的获取、误差纠正、光子去噪和分类等步骤，旨在从复杂的光子数据中提取准确的地理信息，用于科学研究和应用。
   4. 下一个点云魔方，实现一个单目模型的构建
